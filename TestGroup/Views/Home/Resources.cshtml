@model IEnumerable<TestGroup.Models.Unit>

@{
    ViewBag.Title = "單元回顧";
}
<style>
    .thumbnail {
        padding: 15px;
        border: none;
        background-color: #396060;
        color: #DAA520;
        font-size: 30px;
    }

    .keywords {
        display: -webkit-box;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .modal {
        background-image: url('../../Pictures/popoutbackground.jpg');
        background-repeat: no-repeat, repeat;
        background-size: cover;
        background-attachment: scroll;
    }

    .modal-header, .modal-body, .modal-footer {
        background-color: #396060;
        color: #DAA520;
        font-size: 20px;
    }

    .modal-header {
        text-align: center;
    }

    .modal-body {
        text-align: left;
    }

    .modal-footer {
        text-align: right;
    }

    .modal-header, .modal-body {
        padding: 10px;
    }
</style>

<h1>影片</h1>
<h1>&</h1>
<h1>題型</h1>

@{
    int count = 0;
    string[] week = { "沒有第零週", "第一週", "第二週", "第三週", "第四週" };
    string[] questionOrder = { "沒有第零題", "第一題", "第二題", "第三題" };
}

<div class="row text-center">
    @foreach (var item in Model)
    {
        <div class="col-md-4 col-sm-6" style="height:350px">
            @if (ViewBag.finished[count])
            {
                <div class="thumbnail shadow">
                    @*<iframe src="@item.VideoLink" style="border-radius:25px" onclick=""></iframe>*@
                    <div style="max-width: 300px; height: 150px; position: relative;margin:auto">
                        <iframe src="@item.VideoLink" frameborder="0" scrolling="no" style="width: 100%; max-width: 300px; height: 150px; border-radius: 25px "></iframe>
                        <div style="width: 80px; height: 80px; position: absolute; opacity: 0; right: 0px; top: 0px;"> </div>
                    </div>
                    <p>
                        <strong>@week[item.Week] 的 @questionOrder[item.Number]</strong> <br />
                        <small><small><small class="keywords">@item.KeyWords</small></small></small>
                    </p>

                    <input type="button" class="btn default" data-toggle="modal" data-target="#@item.UnitID" value="查看內容">
                </div>

                <!-- Modal -->
                <div class="modal fade shadow" id="@item.UnitID" role="dialog">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">×</button>
                                <h2><strong><span class="glyphicon glyphicon-film"></span>  @week[item.Week] 的 @questionOrder[item.Number] </strong> </h2>
                            </div>
                            <div class="modal-body">
                                @*<iframe src="@item.VideoLink" style="width:100%; height:65vh; margin:5px" allowfullscreen></iframe>*@

                                <div style="width: 100%; height: 480px; position: relative;margin:auto">
                                    <iframe src="@item.VideoLink" width="100%" height="480" frameborder="0" scrolling="no" seamless="" allowfullscreen></iframe>
                                    <div style="width: 80px; height: 80px; position: absolute; opacity: 0; right: 0px; top: 0px;"> </div>
                                </div>


                                <p>
                                    <strong>關鍵字：</strong> @item.KeyWords <br /><br />
                                    <strong>題目：</strong>@item.Question
                                    @*<img src="@(item.QuestionImageLink)" style="max-width: 70%; margin:0% 15% 0% 15%" />*@
                                    @if (item.QuestionImageLink != null)
                                    {
                                        @* 【注意】以下圖片是放在google硬碟https://drive.google.com/drive/folders/1RmAtSzaMKTU0rlaqr3rKMBR9PGVpOZUA?usp=sharing，用google寫好的方式embed進來的 *@
                                        <div style=" position: relative; max-width: 100%;">
                                            <iframe src="@(item.QuestionImageLink)" style="width: 100%; height: 400px" allow="autoplay"></iframe>
                                            <div style="width: 60px; height: 60px; position: absolute; opacity: 0; right: 0px; top: 0px;"> </div>
                                        </div>
                                    }
                                    <br />
                                    <strong>答案：</strong>
                                    @if (item.MultipleChoice == true)
                                    {
                                        string[] mapAns = { "?", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J" };
                                        string ans = mapAns[int.Parse(item.Answer)];
                                        <b>正確解答：</b> @ans <br /><br />
                                    }
                                    else
                                    {
                                        @item.Answer.Split(',').First() <br /><br />
                                    }
                                    <strong>概念構圖與解釋：</strong>@Html.Raw(item.ConceptMapDescription)
                                    @* 【注意】以下圖片是放在google硬碟https://drive.google.com/drive/folders/1RmAtSzaMKTU0rlaqr3rKMBR9PGVpOZUA?usp=sharing，用google寫好的方式embed進來的 *@
                                    <div style="position: relative ">
                                        <iframe src="@(item.ConceptMapLink)" style="width: 100%; height: 500px" allow="autoplay"></iframe>
                                        <div style="width: 60px; height: 60px; position: absolute; opacity: 0; right: 0px; top: 0px;"> </div>
                                    </div>
                                </p>

                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn no pull-left" data-dismiss="modal">
                                    <span class="glyphicon glyphicon-remove"></span> 關閉
                                </button>
                                <p>需要 <a href="~/Home/Contact" style="color: #DAA520"><strong>協助</strong></a> 嗎？</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal -->
            }
            @{count++;}

        </div>
    }
</div>


<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h4><span class="glyphicon glyphicon-film"></span>標題</h4>
            </div>
            <div class="modal-body">

            </div>
        </div>
    </div>
</div>